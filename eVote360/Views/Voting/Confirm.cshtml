@model eVote360.ViewModels.Voting.VoteConfirmationViewModel

@{
    ViewData["Title"] = "Confirmar Votos";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-clipboard-check"></i> Confirmacio³n de Votos
                    </h4>
                </div>
                <div class="card-body">
                    @if (TempData["Error"] != null)
                    {
                        <div class="alert alert-danger alert-dismissible fade show">
                            <i class="fas fa-exclamation-circle"></i> @TempData["Error"]
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    }

                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i> 
                        <strong>Â¡Importante!</strong> Revise cuidadosamente sus votos antes de finalizar. 
                        Una vez confirmado, no podro¡ modificar su votacio³n.
                    </div>

                    <div class="mb-4">
                        <h5><i class="fas fa-vote-yea"></i> Proceso Electoral</h5>
                        <p class="lead">@Model.ElectionName</p>
                    </div>

                    <div class="mb-4">
                        <h5><i class="fas fa-user"></i> Votante</h5>
                        <p class="lead">@Model.CitizenName</p>
                    </div>

                    <div class="mb-4">
                        <h5><i class="fas fa-list"></i> Resumen de Votos</h5>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Posicio³n</th>
                                        <th>Candidato</th>
                                        <th>Partido</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var vote in Model.VoteDetails)
                                    {
                                        <tr>
                                            <td><strong>@vote.PositionName</strong></td>
                                            <td>@vote.CandidateName</td>
                                            <td>
                                                <span class="badge bg-info">@vote.PartyAcronym</span>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <form asp-action="Finalize" method="post">
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success btn-lg" onclick="return confirm('Â¿Esto¡ seguro de confirmar sus votos? Esta accio³n no se puede deshacer.')">
                                <i class="fas fa-check-double"></i> Confirmar y Finalizar Votacio³n
                            </button>
                            <a asp-action="SelectPosition" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Modificar Votos
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <div class="card mt-3">
                <div class="card-body bg-light">
                    <h6 class="card-title"><i class="fas fa-shield-alt"></i> Privacidad y Seguridad</h6>
                    <ul class="small text-muted mb-0">
                        <li>Su voto es secreto y ano³nimo</li>
                        <li>Los datos son encriptados y almacenados de forma segura</li>
                        <li>Recibiro¡ una confirmacio³n por correo electro³nico</li>
                        <li>El sistema registra la fecha y hora de su votacio³n</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
